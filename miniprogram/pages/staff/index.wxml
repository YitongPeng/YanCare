<!-- pages/staff/index.wxml -->
<view class="staff-page">
  <!-- å¤´éƒ¨ -->
  <view class="header">
    <view class="header-title">å‘˜å·¥å·¥ä½œå°</view>
    <view class="header-user">{{userInfo ? (userInfo.real_name || userInfo.nickname || 'å‘˜å·¥') : 'å‘˜å·¥'}}</view>
  </view>

  <!-- ä»Šæ—¥ä¸šç»© - æŒ‰é—¨åº—åˆ†ç»„ -->
  <view class="stats-section">
    <view class="section-title">ä»Šæ—¥ä¸šç»©</view>
    
    <block wx:for="{{todayStatsByStore}}" wx:key="index">
      <view class="store-stats-card">
        <view class="store-name-badge">{{item.store.name}}</view>
        <view class="stats-grid">
          <view class="stat-item">
            <view class="stat-value">{{item.stats.wash || 0}}</view>
            <view class="stat-label">æ´—å¤´</view>
          </view>
          <view class="stat-item">
            <view class="stat-value">{{item.stats.soak || 0}}</view>
            <view class="stat-label">æ³¡å¤´</view>
          </view>
          <view class="stat-item">
            <view class="stat-value">{{item.stats.care || 0}}</view>
            <view class="stat-label">å…»å‘</view>
          </view>
          <view class="stat-item highlight">
            <view class="stat-value">{{item.stats.total || 0}}</view>
            <view class="stat-label">æ€»è®¡</view>
          </view>
        </view>
      </view>
    </block>
    
    <view wx:if="{{todayStatsByStore.length === 0}}" class="empty">
      åŠ è½½ä¸­...
    </view>
  </view>

  <!-- åŠŸèƒ½å…¥å£ -->
  <view class="menu-section">
    <view class="menu-item" bindtap="goToSchedule">
      <view class="menu-icon">ğŸ“…</view>
      <view class="menu-info">
        <view class="menu-title">æ’ç­è®¾ç½®</view>
        <view class="menu-desc">è®¾ç½®ä¸Šç­æ—¶é—´å’Œé—¨åº—</view>
      </view>
      <view class="menu-arrow">â€º</view>
    </view>
    
    <view class="menu-item" bindtap="goToAppointments">
      <view class="menu-icon">ğŸ“‹</view>
      <view class="menu-info">
        <view class="menu-title">æŸ¥çœ‹é¢„çº¦</view>
        <view class="menu-desc">æŸ¥çœ‹å’Œæ ¸é”€å®¢æˆ·é¢„çº¦</view>
      </view>
      <view class="menu-arrow">â€º</view>
    </view>
    
    <view class="menu-item" bindtap="goToAddCard">
      <view class="menu-icon">ğŸ”„</view>
      <view class="menu-info">
        <view class="menu-title">ç»­å¡</view>
        <view class="menu-desc">ä¸ºè€å®¢æˆ·ç»­åŠç–—ç¨‹å¡</view>
      </view>
      <view class="menu-arrow">â€º</view>
    </view>
    
    <view class="menu-item" bindtap="goToNewCard">
      <view class="menu-icon">ğŸ’³</view>
      <view class="menu-info">
        <view class="menu-title">å¼€å¡</view>
        <view class="menu-desc">ä¸ºæ–°å®¢æˆ·åŠç†ç–—ç¨‹å¡</view>
      </view>
      <view class="menu-arrow">â€º</view>
    </view>
  </view>

  <!-- ä»Šæ—¥é¢„çº¦ -->
  <view class="appointments-section">
    <view class="section-title">ä»Šæ—¥é¢„çº¦</view>
    
    <view wx:if="{{todayAppointments.length === 0}}" class="empty">
      ä»Šæ—¥æš‚æ— é¢„çº¦
    </view>
    
    <view class="appointment-list" wx:else>
      <view 
        class="appointment-item"
        wx:for="{{todayAppointments}}"
        wx:key="id"
      >
        <view class="apt-time">{{item.start_time}}</view>
        <view class="apt-info">
          <view class="apt-service">{{item.serviceText}}</view>
          <view class="apt-customer">{{item.customer.nickname || 'é¡¾å®¢'}}</view>
        </view>
        <view class="apt-status {{item.status}}">
          {{item.status === 'completed' ? 'å·²å®Œæˆ' : 'å¾…æœåŠ¡'}}
        </view>
      </view>
    </view>
  </view>

  <!-- åº•éƒ¨æŒ‰é’® -->
  <view class="bottom-buttons">
    <view class="back-btn" bindtap="backToCustomer">
      è¿”å›å®¢æˆ·ç«¯
    </view>
    <view class="logout-btn" bindtap="logout">
      é€€å‡ºç™»å½•
    </view>
  </view>
</view>
